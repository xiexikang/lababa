**目标**

* /pages/statistics/index 仅展示当前登录用户的数据；所有统计与列表都基于后端按 token 返回的个人数据；评分清晰可解释。

**接口对接**

* `GET /api/statistics/week` → 绑定：`weeklyDaysCount`、`weeklyRecordsCount`、`weeklyColorDist`、`weeklyScore`、`scoreDetails`

* `GET /api/statistics/month-days` → 绑定：`monthMarkDays`、`monthDayStatus`

* `GET /api/record/recent?limit=10` → 绑定：最近记录列表

* `GET /api/record/:id` → 记录详情弹窗（保持现有逻辑）

**评分规则（后端或前端实现）**

* 基础分 80；惩罚：便秘 −15/次、拉肚子 −10/次、红/黑/灰白 −8、绿色 −3、极端时长(<60s −2、>20m −3、>40m −6)、连续≥2天异常 −5

* 奖励：正常 +2/次（上限 +20）、打卡覆盖率 +10×(天数/7)（上限 +10）、间隔稳定 +5

* clamp 至 0–100；返回 `scoreDetails`（加分/扣分项数组）用于展示说明

**前端改造步骤**

1. 在统计页 `onMounted` 发起并发请求三项数据，替换所有 `store.globalState.records` 的本地计算；无 token 时弹窗引导授权，登录后重新拉取。
2. 将 `weeklyScore` 接入接口结果或在前端用统一函数计算；在评分条旁展示 `scoreDetails`（例如“便秘 1 次 −15、正常 6 次 +12、覆盖率 +6 …”）。
3. 保留日历与最近记录 UI；将 `statusForDay` 使用 `monthDayStatus` 计算。
4. 打开详情沿用 `GET /api/record/:id`；失败时 toast 错误。

**UI与体验**

* 空状态：个人无记录时提示“还没有记录哦～快去主页打卡吧！”（保持现状）。

* 评分色条阶梯色：≥80 绿、60–79 黄、<60 红。

**验证**

* 未登录提示授权；登录后个人数据加载；最近记录均为本人；评分落在合理区间；H5与小程序一致显示。

**实施**

* 我将更新统计页数据源为接口，接入评分和明细说明，登录拦截与空状态保留；不改其他

