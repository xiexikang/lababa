## 产品目标
- 将主体从“记录人”改为“记录宠物猫咪”，支持多只猫的独立健康记录。
- 首次登录即完成“我的猫咪”资料录入；之后可在记录时快速切换猫咪。
- 为每只猫提供按日/月的排便统计、异常提醒与健康趋势。

## 关键特性
- 多猫管理：新增、编辑、删除；头像、昵称、性别、生日、绝育、体重等。
- 品种选择：内置常见品种字典（支持搜索/筛选），可扩展自定义。
- 记录归属：每条排便记录绑定 `catId`；可查看某只猫的独立时间线与统计。
- 异常检测：基于记录的 `status`（腹泻/便秘/正常）与频率触发提醒。

## 数据模型（MySQL，新表与改动）
- `cats`：`id, userId, name, breedId, avatarUrl, gender, birthDate, weightKg, neutered, notes, createdAt`
- `breeds`：`id, name, aliases, origin`（初期可用静态字典返回，无需持久化）
- `records`：新增 `catId` 外键；索引 `INDEX(userId, catId, endTime)`；现有字段保持不变
- 约束：所有读写通过 `userId` 进行权限限定；仅资源所有者可访问

## 后端接口（Go，基于现有风格与鉴权中间件）
- 鉴权沿用：`POST /api/auth/weapp`（返回 `Authorization`）
- 猫咪
  - `GET /api/cats/list`（分页/搜索）
  - `POST /api/cats/create`
  - `PUT /api/cats/update/{id}`
  - `DELETE /api/cats/delete/{id}`
- 品种
  - `GET /api/breeds/list`（静态返回常见品种，支持 `q` 搜索）
- 记录（新增 catId 维度）
  - `GET /api/records/list?catId&start&end&pageNum&pageSize`
  - `POST /api/records/create`（body 增加 `catId`）
  - `PUT /api/records/update/{id}`（允许更新 `catId`）
  - `GET /api/records/detail/{id}`、`DELETE /api/records/delete/{id}` 保持
- 统计
  - `GET /api/statistics/summary?catId&start&end`
  - `GET /api/statistics/month-days?catId&month`
- 兼容迁移
  - 无 `catId` 的旧记录：如用户仅有 1 只猫则自动补齐；≥2 只猫提示用户分配

## 前端页面与 UX（Taro + Vue，对齐现有代码架构）
- 首次登录流程（`/pages/login/index.vue`）
  - 登录成功后检测 `cats.count`；为 0 时跳转“新增猫咪”引导页
- 猫咪管理（新页面 `/pages/cats/index.vue`）
  - 列表 + 新增/编辑弹窗；品种选择器（调用 `/api/breeds/list`）
- 首页记录（`/pages/index/index.vue`）
  - 顶部“当前猫咪”选择器（头像+名称，支持切换）
  - 记录按钮保持，保存时将 `catId` 写入；详情弹窗增加猫咪选择
- 统计与排行（`/pages/statistics/index.vue`, `/pages/ranking/index.vue`）
  - 增加“按猫筛选”下拉；图表与排行基于 `catId` 过滤
- 个人中心（`/pages/profile/index.vue`）
  - 入口“我的猫咪”管理；基础设置（提醒、隐私说明）

## 记录字段与健康逻辑
- 记录字段沿用：`color, status(normal/diarrhea/constipation), shape, amount, note`
- 健康提醒规则（示例）
  - 24 小时腹泻 ≥2 次：提示关注饮食与水源
  - 48 小时未记录：提示可能便秘或疏漏记录
  - 支持关闭提醒或设置静默时段

## 权限与隐私
- 所有 `cats/records/statistics` 接口在服务端以 `userId` 鉴权隔离
- 不存储敏感信息；头像走对象存储或微信临时地址；不记录位置信息

## 迁移策略
- 数据库：增加 `records.catId` 字段，创建 `cats` 表
- 首次发布：若用户无猫数据，弹引导完成录入；旧记录补齐策略如上

## 迭代里程碑
- 第一阶段（核心打通）
  - 后端增加 `cats` 表与接口；`records` 增加 `catId`
  - 首页支持选择猫咪并带 `catId` 创建记录；列表/统计支持 `catId` 过滤
- 第二阶段（完善体验）
  - 猫咪管理页、品种选择器、图表优化
  - 异常提醒与静默设置；通知提示（小程序许可范围内）
- 第三阶段（深度健康）
  - 趋势分析、跨猫对比、导出分享

## 与现有代码的映射
- 鉴权与请求复用：`src/utils/request.ts`
- 首页改造点：`src/pages/index/index.vue`（选择猫、保存时传 `catId`）
- 记录状态扩展：`src/store/poop.ts`（在 `PoopRecord` 增加 `catId`，本地缓存兼容）
- 登录后流程：`src/pages/login/index.vue`（登录成功后引导到新增猫咪页）

请确认以上改版方向与范围；确认后我将按“第一阶段”开始实现。