**目标**
- 除排行榜列表外，排行页以及其他页面的接口全部按“个人数据”查询。
- 未登录统一跳转到独立登录页；登录成功后自动回到触发鉴权的原页面。

**接口边界（排行页）**
- 全局榜（公共）：`GET /api/ranking/list?period=total|day|week|month`（不区分用户，需鉴权或可公开按需）
- 我的排名（个人）：`GET /api/ranking/me?period=...`
- 邀请/绑定粑友（个人）：`POST /api/friends/invite`、`POST /api/friends/accept`
- 顶部“我的头像昵称”展示：从本地 `user-info` 或 `GET /api/user/me`

**统一鉴权跳转设计**
- 新增登录页：`/pages/login/index`
  - WeApp：按钮点击触发 `Taro.login` + `Taro.getUserProfile`，后端换取 `auth-token` 与用户信息，写入本地，成功后执行回跳。
  - H5：显示提示并走简化登录（可模拟或后端 OAuth），保持接口一致。
- 请求层拦截（保持现层封装）：
  - 401/403：统一 `navigateTo('/pages/login/index?redirect=<encoded_current_route>')`，同时 `showToast('请先登录')`。
  - 公共接口标记：`requireAuth: false` 或 `publicPaths`（现封装已支持）。
- 回跳逻辑：登录页读取 `redirect` 参数：
  - 若目标是 tabBar 页面（例如 `pages/index/index`、`pages/statistics/index`、`pages/profile/index`、`pages/ranking/index`），使用 `Taro.switchTab({ url })`；
  - 非 tabBar 页面使用 `Taro.reLaunch({ url })` 或 `Taro.redirectTo({ url })`（根据场景选择）。

**页面侧改造**
- 删除各页面手写 token 校验（例如 `const token = Taro.getStorageSync('auth-token')`）与手动弹窗，统一依赖请求层拦截；仍可在关键交互处调用 `ensureAuth()` 做显式校验。
- 排行页：
  - 列表数据用全局榜接口；“我的排名”“我的头像昵称”“分享邀请”等用个人接口；
  - 监听 `user-updated` 事件刷新个人展示（已接入）。
- 统计页与其他页面：保持“仅个人数据”接口（已改造的统计页继续按个人接口渲染）。

**实现清单**
1. 新增 `pages/login/index`（页面与 `.config.ts`）：
  - UI：头像/nickname 登录提示与按钮；登录中、失败提示。
  - 登录成功：写入 `auth-token` 与 `user-info`，触发 `Taro.eventCenter.trigger('user-updated')`，再执行回跳。
2. 请求层完善：
  - 在 401/403 时统一跳转到登录页并携带 `redirect`（当前路由+查询）
  - 继续保留 `setAuthConfig({ publicPaths })` 与 `requireAuth` 参数。
3. 页面清理：移除各处手写 token 检查（如排行、统计、详情等），使用统一拦截；必要处提供 `ensureAuth()` 显式调用。

**路由与回跳获取**
- 当前路由：`const inst = Taro.getCurrentInstance(); const path = inst?.router?.path; const params = inst?.router?.params;` 拼接成 `path?querystring`。
- 登录页读取 `redirect` 并判断是否 tabBar，选择 `switchTab` 或 `reLaunch/redirectTo`。

**验证**
- 未登录打开排行或统计页：自动跳至登录页，登录后回到原来页面并加载个人数据/榜单。
- 榜单仍显示全局榜；“我的排名”等区域仅个人数据。
- H5 与小程序行为一致（授权方式差异按平台容错）。

请确认，我将按此新增登录页并完善请求层 401 跳转，随后清理页面内的手工校验，保障统一行为。