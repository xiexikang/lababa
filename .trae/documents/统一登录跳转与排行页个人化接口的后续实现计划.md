**目标**
- 完成统一鉴权跳转：未登录统一进入独立登录页，登录后自动回到触发页面。
- 排行页除榜单外全部接口按个人数据查询；统计页展示评分明细。

**登录页与统一跳转**
- 新增 `/pages/login/index` 与 `index.config.ts`，UI含登录按钮、状态提示。
- 登录流程：`Taro.login` + `Taro.getUserProfile` → 交换 token 与 user-info → 写入本地 → `Taro.eventCenter.trigger('user-updated')`。
- 回跳逻辑：登录页读取 `redirect` 参数；
  - 若为 tabBar 路由（如 `pages/index/index`、`pages/statistics/index`、`pages/profile/index`、`pages/ranking/index`）→ `Taro.switchTab({ url })`
  - 非 tabBar → `Taro.redirectTo` 或 `Taro.reLaunch`。
- 请求层：在 401/403 统一 `navigateTo('/pages/login/index?redirect=<encoded_current_route>')` 并 `showToast('请先登录')`；保留公开路径 `publicPaths` 与 `requireAuth:false`。

**当前页跳转参数采集**
- 在页面进入与关键操作前，获取当前路由：`Taro.getCurrentInstance()?.router?.path` + `params`，构造 `<path>?<query>` 作为 `redirect`。
- 对于纯接口触发的 401，采用请求层的默认跳转；对用户交互触发（如打开详情），优先显式传入 `redirect` 以确保准确回跳。

**排行页个人化**
- 列表：`GET /api/ranking/list?period=total|day|week|month`（全局榜）；
- 我的排名与头像昵称：`GET /api/ranking/me?period=...`、`GET /api/user/me`；
- 邀请与接受：`POST /api/friends/invite`、`POST /api/friends/accept`（个人接口）；
- 未登录访问排行页时按统一跳转至登录；登录返回页后自动刷新个人区块。

**统计页评分明细**
- 接口返回 `scoreDetails: Array<{ label:string; value:number }>`；在评分条旁渲染明细（如“便秘 −15、正常 +12、覆盖率 +6”）。
- 已改为个人接口的数据源；保留现有 UI 与色条阈值。

**页面清理**
- 移除分散的 `Taro.getStorageSync('auth-token')` 手工校验（如统计页、排行页打开详情等），增强为：
  - 显式交互处使用 `ensureAuth(redirect)`；
  - 其他依赖请求层 401 统一跳转。

**测试与验证**
- 未登录访问任意需要鉴权页面与操作 → 跳转登录 → 登录成功自动回到原页面；
- 排行页仅榜单为全局，其余为个人数据；统计页评分与明细正确显示；
- H5 与小程序行为一致（授权方式容错）。

如确认，我将新增登录页、完善请求层 401 跳转与页面参数采集，并调整排行页与统计页按照上述方案实现。